--- 
title: "Aide-mémoire : Analyses de données & Cartographie sur R"
author: "Alexis Mérot"
date: "Modifié le : `r Sys.Date()`"
site: bookdown::bookdown_site
lang: fr-FR
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
csl: chicago-author-date-fr.csl
link-citations: yes
nocite: |
  @*
always_allow_html: true
github-repo: "alexmerot/Mon_aide_memoire"
url: 'https\://alexmerot.github.io/Mon_aide_memoire/'
favicon: "images/favicon_io/favicon.ico"
description: "Ceci est l'ensemble de mes notes accumulées au fur et à mesure de mon apprentissage de différents outils et concepts qui sont nécessaires à mes besoins dans les analyses de données et la programmation. Cela me permet de les comprendre, les mémoriser, ainsi que de les partager."
---

```{r max-height, include=FALSE}
# Ajout d'un paramètre de chunk pour changer la hauteur max des blocs de code.
# Astuce trouvée sur https://bookdown.org/yihui/rmarkdown-cookbook/hook-scroll.html#hook-scroll

options(width = 60)

# Hauteur du bloc source.
local({
  hook_source <- knitr::knit_hooks$get('source')
  knitr::knit_hooks$set(source = function(x, options) {
    if (!is.null(options$source.max.height)) options$attr.source <- c(
      options$attr.source,
      sprintf('style="max-height: %s;"', options$source.max.height)
    )
    hook_source(x, options)
  })
})

# Hauteur du bloc de sortie.
local({
  hook_output <- knitr::knit_hooks$get('output')
  knitr::knit_hooks$set(output = function(x, options) {
    if (!is.null(options$output.max.height)) options$attr.output <- c(
      options$attr.output,
      sprintf('style="max-height: %s;"', options$output.max.height)
    )
    hook_output(x, options)
  })
})
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(
 fig.width = 7,
 fig.asp = 0.8,
 out.width = "60%",
 fig.align='center',
 source.max.height="500px"
)
options(knitr.table.format = "html")
```

```{r include=FALSE}
# Créer automatiquement une base de données '.bib' pour les packages R utilisés.
knitr::write_bib(c(
  .packages(), 'knitr', 'rmarkdown', 'blogdown'
), 'packages.bib')

# Ne pas supprimer les fichiers latex auxiliaires.
# Permet de mettre à jour les références pour biblatex après un rebuild du livre.
options(tinytex.clean = FALSE)
```



# Introduction {.unnumbered #introduction}

::: {.infobox .caution data-latex="{caution}"}
Cet aide-mémoire n'est pour l'instant qu'un brouillon. Il est donc loin d'être complet et l'écriture est pour l'instant très succincte. 
:::

Ce projet est un ensemble de notes écrites en R Markdown [@R-rmarkdown] et via
le package `bookdown` (<https://github.com/rstudio/bookdown>). Ces notes
s'accumuleront au fur et à mesure de mon apprentissage des différents outils et
concepts dont j'ai besoin pour les analyses de données et la programmation. Cela
me permet de les comprendre, les mémoriser, ainsi que de les partager.

L'aide-mémoire s'insérera peut-être dans un autre plus gros projet : la création
d'un blog répertoriant tous mes projets et mon CV. Il commencera certainement
lorsque je pourrai démarrer la lecture de la documentation de l'excellent
package `blogdown` (<https://bookdown.org/yihui/blogdown/>).

Cet aide-mémoire intégrera les notions théoriques indispensables en statistique
et en cartographie, ainsi que les outils proposés par R (et si besoin d'autres
langages) pour la mise en pratique à travers d'exemples. Étant principalement
intéressé par la Biologie de la conservation et globalement l'Écologie, les
exemples se focaliseront pour la plupart sur des données en lien à ces domaines.

Toutes les sources qui m'ont été utiles pour acquérir ces connaissances seront
accessibles dans les références bibliographiques ou dans les ressources Internet
à la fin des chapitres.

Il n'y a pour l'instant qu'une version en ligne, mais une version PDF sera aussi disponible en téléchargement lorsque l'aide-mémoire sera plus mature.

Avant de commencer, on charge les packages dont on aura besoin tout au long de
ce document.

```{r, message=FALSE}
library("ggplot2")   # Visualisation des données basée sur "The Grammar of graphics"
library("ggthemes")  # Ajoute d'autres thèmes à ggplot2
library("ggrepel")   # Permet un meilleur affichage des étiquettes
library("patchwork") # Permet de combiner les graphiques
library("dplyr")     # Permet la manipulation des données
library("ggforce")   # Extension de ggplot2 pour de nouveaux geom_*

library("reactable") # Création des tableaux interactifs (HTML seulement)
```

```{r theme-reactable}
# Configuration du thème par défaut des tableaux via 'reactable'
options(reactable.theme = reactableTheme(
  color = "hsl(233, 9%, 87%)",
  backgroundColor = "hsl(233, 9%, 19%)", 
  borderColor = "hsl(233, 9%, 22%)", 
  stripedColor = "hsl(233, 12%, 22%)", 
  highlightColor = "hsl(233, 12%, 24%)",
  inputStyle = list(backgroundColor = "hsl(233, 9%, 25%)"), 
  selectStyle = list(backgroundColor = "hsl(233, 9%, 25%)"), 
  pageButtonHoverStyle = list(backgroundColor = "hsl(233, 9%, 25%)"), 
  pageButtonActiveStyle = list(backgroundColor = "hsl(233, 9%, 28%)")
  )
)

# Paramètres par défaut.
my_reactable <- function(
  data,
  height = 650,
  filterable = TRUE,
  defaultPageSize = 5, 
  minRows = 5,
  highlight = TRUE,
  rownames = TRUE,
  striped = TRUE,
  pagination = FALSE,
  defaultColDef = colDef(na = "NA", align = "center"),
  style = list(fontSize = "10px"),
  ...
) {
  reactable(
    data,
    height = height,
    filterable = filterable,
    defaultPageSize = defaultPageSize, 
    minRows = minRows,
    highlight = highlight,
    rownames = rownames,
    striped = striped,
    pagination = pagination,
    defaultColDef = defaultColDef,
    style = style,
    ...
  )
}
```

